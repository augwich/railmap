<!DOCTYPE html>
<html>
<head>
	<meta charset=UTF-8>
	<title>RAILMAP.xyz - Passenger Rail in the United States</title>
	<link rel="author" type="text/plain" href="humans.txt">
	<meta name="description" content="A map of all passenger rail (Amtrak, Commuter, Light Rail, Subway, etc.) networks in the United States.">
	<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
	<meta property="og:title" content="US Passenger Rail Map">
	<meta property="og:image" content="http://www.railmap.xyz/thumbnail.png">
	<meta property="og:site_name" content="RAILMAP.xyz">
	<link rel="stylesheet" type="text/css" href="index.css">
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css">

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.js"></script>

	<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.5.0/mapbox-gl.js'></script>
	<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.5.0/mapbox-gl.css' rel='stylesheet' />

	<style>
		#map {position:absolute; width:100%; margin-top:40px }
	</style>

	<!-- Matomo -->
	<script type="text/javascript">
	  var _paq = window._paq || [];
	  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
	  _paq.push(['trackPageView']);
	  _paq.push(['enableLinkTracking']);
	  (function() {
	    var u="//www.railmap.xyz/analytics/";
	    _paq.push(['setTrackerUrl', u+'matomo.php']);
	    _paq.push(['setSiteId', '1']);
	    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
	    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
	  })();
	</script>
	<!-- End Matomo Code -->

</head>

<body>

	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.js"></script>

	<!-- Navbar -->
	<div class="ui fixed inverted blue menu">
		<div class="ui container">
			<a href="railmap.xyz" class="active vertically fitted item">
				<h4 class="header">RAILMAP.xyz</h4>
			</a>
			<div class="ui simple dropdown item">
				About
				<i class="dropdown icon"></i>
				<div class="menu">
					<a class="item" id="project-overview">
						Project Overview
					</a>
					<a class="item" id="map-usage">
						How To Use
					</a>
					<a href="faq.html" class="item">
						FAQ
					</a>

					<div class="divider"></div>
					<div class="header">
						Legend
					</div>
					<div class="item">
						<img class="ui avatar image" src="images/legend_icons_standard_line.svg">
						Standard Line
					</div>
					<div class="item">
						<img class="ui avatar image" src="images/legend_icons_limited_service.svg">
						Limited Service
					</div>
					<div class="item">
						<img class="ui avatar image" src="images/legend_icons_under_construction.svg">
						Planned Service
					</div>

					<div class="divider"></div>
					<p class="disabled item">
						<em>Current Map Version: 0.1.6</em>
					</p>
				</div>
			</div>
			<div class="ui simple dropdown item">
				Resources
				<i class="dropdown icon"></i>
				<div class="menu">
					<div class="header">
						Additional Information
					</div>
					<a href="links.html" class="item">
						System Links/Timetables
					</a>
					<a href="maps.html" class="item">
						More Maps
					</a>
					<div class="divider"></div>
					<a href="https://trello.com/b/GinKUKvq/usa-rail-project" class="item" target="_blank">
						Roadmap
					</a>
					<a href="https://github.com/augwich/railmap" class="item" target="_blank">
						Dataset <em>(GitHub)</em>
					</a>
					<a class="item" id="additional-links" href="links.html#other_project_links">
						Other Project Links
					</a>

					<div class="divider"></div>
					<div class="header">
						Talk to Us!
					</div>
					<a href="https://trello.com/c/H4OaVxgs" class="item">
						Contact/Report an Issue
					</a>
				</div>
			</div>
			
			<div class="right menu">
				<a href="https://trello.com/c/H4OaVxgs" class="item" data-tooltip="To report an issue, please visit the Trello board" data-position="bottom right" target="_blank">
					<i class="edit icon"></i>
					Report an Issue
				</a>
			</div>
		</div>
	</div>

	<!-- Modals for How to Use and Project Overview menu options -->

	<!-- Modal activation script -->
	<script>
		$(document).ready(function(){
			$('#map-usage').click(function(){
				$('#map-usage-modal').modal('show');
			});
		});
	</script>

	<!-- Modal element -->
	<div id="map-usage-modal" class="ui modal">
		<div class="header">
			How To Use
		</div>
		<div class="content">
			<p>Zoom in and out to reveal/hide systems.</p>
			<p>Click/Tap an element to view additional information about that element.</p>
		</div>
		<div class="actions">
			<div class="ui basic approve button">
				Close
			</div>
		</div>
	</div>

	<!-- Modal activation script -->
	<script>
		$(document).ready(function(){
			$('#project-overview').click(function(){
				$('#project-overview-modal').modal('show');
			});
		});
	</script>

	<!-- Modal element -->
	<div id="project-overview-modal" class="ui modal">
		<h1 class="header">
			Project Overview
		</h1>
		<div class="content">
			<p>Railmap.xyz seeks to be a synthesis of all passenger rail systems in the United States. The idea is to allow the user to easily view and browse all passenger rail systems (intercity, commuter, light, heavy, and others) in a single map, and to glean additional information about these systems and how they interact. </p>
			<p>This project is currently under development, with updates being regularly released as available. Currently, the map shows data for portions of the northeast. Eventually, however, this will be expanded to include all US States. </p>
			<p>If you would like to learn more, please visit the links above.</p>
		</div>
		<div class="actions">
			<div class="ui basic approve button">
				Close
			</div>
		</div>
	</div>

	<!-- Modal activation script -->
<!-- 	<script>
		$(document).ready(function(){
			$('#additional-links').click(function(){
				$('#additional-links-modal').modal('show');
			});
		});
	</script> -->

	<!-- Modal element -->
	<!-- <div id="additional-links-modal" class="ui modal">
		<h1 class="header">
			Additional Links
		</h1>
		<div class="content">
			<div class="ui list">
				<div class="item">
					<a href="https://sites.google.com/site/northeastrailmap/" class="header" target="_blank">A beautiful map of all rail systems in the Northeast</a>
					<div class="description">
						It's not interactive and a bit out of date, unfortunately.
					</div>
				</div>
				<div class="item">
					<a href="https://www.openrailwaymap.org/" class="header" target="_blank">An amazingly detailed map of all rail networks across the world</a>
					<div class="description">
						Includes literally every rail line that exists, and even some that no longer do. Amazingly detailed. Only shows rail <em>lines</em> (i.e. the physical rails), however, and not the passenger rail systems that run along them.
					</div>
				</div>
				<div class="item">
					<a href="http://www.railmaponline.com/USWestMap.php" class="header" target="_blank">A cool, interactive map of rail lines in the Western U.S.</a>
					<div class="description">
						Again, shows lines, not systems. But detailed, and properly interactive. Shows states west of the Rockies only. As of Summer 2019, still saw regular updates.
					</div>
				</div>
				<div class="item">
					<a href="http://www.acwr.com/economic-development/rail-maps" class="header" target="_blank">Some cool maps of freight systems in the U.S.</a>
					<div class="description">
						It's not interactive and a bit out of date, unfortunately.
					</div>
				</div>
				<div class="item">
					<a href="https://traveler.sharemap.org/Passenger_trains_in_America" class="header" target="_blank">A properly interactive map of many rail systems in the U.S.</a>
					<div class="description">
						Includes Intercity (Amtrak) and most commuter rails. Does not include Urban systems (light rail, subways, etc), or any stations. Does have a feature to search and get directions along routes. Frequently breaks. Probably the closest to what I want this project to eventually be.
					</div>
				</div>
			</div>
			<div class="divider"></div>
			<p><em>Got a link you'd like to see here? Let us know!</em></p>
		</div>
		<div class="actions">
			<div class="ui basic cancel button">
				Close
			</div>
		</div>
	</div> -->


	<!-- Map Element -->
	<div>

		<!-- Load geocoder for search function -->

		<script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.4.2/mapbox-gl-geocoder.min.js'></script>
		<link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.4.2/mapbox-gl-geocoder.css' type='text/css' />
		<!-- Promise polyfill script required to use Mapbox GL Geocoder in IE 11 -->
		<script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.auto.min.js"></script>

		<!-- Map object -->
		<div id="map"></div>
		<script type="text/javascript">
			//define access token
			mapboxgl.accessToken = 'pk.eyJ1IjoiYXVnd2ljaCIsImEiOiJjamZyYmcyM3Axems3MzNwZWxpM2w2Z285In0.HxvN-GHjGBnR9usto_s1SQ';

			//create map
			const map = new mapboxgl.Map({
				container: 'map',
				style: 'mapbox://styles/augwich/cju6db6xg1btp1fqlv1bw81xi',
				center: [-73.999, 40.723],
				zoom: 7.5
			});

			//add nav controls
			map.addControl(new mapboxgl.NavigationControl(), 'top-left');

			//add geolocation
			map.addControl(new mapboxgl.GeolocateControl({
			    positionOptions: {
			        enableHighAccuracy: true
			    },
			    trackUserLocation: true
			}), 'top-left');

			//add search function
			map.addControl(new MapboxGeocoder({
				accessToken: mapboxgl.accessToken,
				// limit results to Australia
				countries: 'us',
				mapboxgl: mapboxgl
			}));

			var Stations_PM = 'Stations Primary - Multi System';
			var Stations_PC = 'Stations Primary - Connection';
			var Stations_PT = 'Stations Primary - Terminus';
			var Stations_S = 'Stations Secondary';
			var Stations_P = 'Stations Planned';

			// When a click event occurs on a feature in the places layer, open a popup at the
			// location of the feature, with description HTML from its properties.
			map.on('click', Stations_PM, function (e) {
				var coordinates = e.features[0].geometry.coordinates.slice();
				var description = '<strong>' + e.features[0].properties.Name_Link_HTML + '</strong> <br/> <strong>System: </strong>' + e.features[0].properties.System + '<br/> <strong>Lines: </strong>' + e.features[0].properties.Lines + '<br/> <strong> Services: </strong>' + e.features[0].properties.Service + '<br/> <strong> City: </strong>' + e.features[0].properties.City + '<br/> <strong>Neighborhood: </strong>' + e.features[0].properties.Neighborhood + '<br/> <strong>Status: </strong>' + e.features[0].properties.Status + '<br/> <strong>Year Opened: </strong>' + e.features[0].properties.Year_Opened + '<br/> <strong>Connections: </strong>' + e.features[0].properties.Connections + '<br/> <strong>Accessible: </strong>' + e.features[0].properties.Handicap_Accessible;				 
				 
				// Ensure that if the map is zoomed out such that multiple
				// copies of the feature are visible, the popup appears
				// over the copy being pointed to.
				while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
					coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
				}
				 
				new mapboxgl.Popup()
					.setLngLat(coordinates)
					.setHTML(description)
					.addTo(map);
			});
			 
			// Change the cursor to a pointer when the mouse is over the places layer.
			map.on('mouseenter', Stations_PM, function () {
				map.getCanvas().style.cursor = 'pointer';
			});
			 
			// Change it back to a pointer when it leaves.
			map.on('mouseleave', Stations_PM, function () {
				map.getCanvas().style.cursor = '';
			});

			map.on('click', Stations_PC, function (e) {
				var coordinates = e.features[0].geometry.coordinates.slice();
				var description = '<strong>' + e.features[0].properties.Name_Link_HTML + '</strong> <br/> <strong>System: </strong>' + e.features[0].properties.System + '<br/> <strong>Lines: </strong>' + e.features[0].properties.Lines + '<br/> <strong> Services: </strong>' + e.features[0].properties.Service + '<br/> <strong> City: </strong>' + e.features[0].properties.City + '<br/> <strong>Neighborhood: </strong>' + e.features[0].properties.Neighborhood + '<br/> <strong>Status: </strong>' + e.features[0].properties.Status + '<br/> <strong>Year Opened: </strong>' + e.features[0].properties.Year_Opened + '<br/> <strong>Connections: </strong>' + e.features[0].properties.Connections + '<br/> <strong>Accessible: </strong>' + e.features[0].properties.Handicap_Accessible;				 

				// Ensure that if the map is zoomed out such that multiple
				// copies of the feature are visible, the popup appears
				// over the copy being pointed to.
				while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
					coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
				}
				 
				new mapboxgl.Popup()
					.setLngLat(coordinates)
					.setHTML(description)
					.addTo(map);
			});
			 
			// Change the cursor to a pointer when the mouse is over the places layer.
			map.on('mouseenter', Stations_PC, function () {
				map.getCanvas().style.cursor = 'pointer';
			});
			 
			// Change it back to a pointer when it leaves.
			map.on('mouseleave', Stations_PC, function () {
				map.getCanvas().style.cursor = '';
			});

			map.on('click', Stations_PT, function (e) {
				var coordinates = e.features[0].geometry.coordinates.slice();
				var description = '<strong>' + e.features[0].properties.Name_Link_HTML + '</strong> <br/> <strong>System: </strong>' + e.features[0].properties.System + '<br/> <strong>Lines: </strong>' + e.features[0].properties.Lines + '<br/> <strong> Services: </strong>' + e.features[0].properties.Service + '<br/> <strong> City: </strong>' + e.features[0].properties.City + '<br/> <strong>Neighborhood: </strong>' + e.features[0].properties.Neighborhood + '<br/> <strong>Status: </strong>' + e.features[0].properties.Status + '<br/> <strong>Year Opened: </strong>' + e.features[0].properties.Year_Opened + '<br/> <strong>Connections: </strong>' + e.features[0].properties.Connections + '<br/> <strong>Accessible: </strong>' + e.features[0].properties.Handicap_Accessible;				 

				// Ensure that if the map is zoomed out such that multiple
				// copies of the feature are visible, the popup appears
				// over the copy being pointed to.
				while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
					coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
				}
				 
				new mapboxgl.Popup()
					.setLngLat(coordinates)
					.setHTML(description)
					.addTo(map);
			});
			 
			// Change the cursor to a pointer when the mouse is over the places layer.
			map.on('mouseenter', Stations_PT, function () {
				map.getCanvas().style.cursor = 'pointer';
			});
			 
			// Change it back to a pointer when it leaves.
			map.on('mouseleave', Stations_PT, function () {
				map.getCanvas().style.cursor = '';
			});

			map.on('click', Stations_S, function (e) {
				var coordinates = e.features[0].geometry.coordinates.slice();
				var description = '<strong>' + e.features[0].properties.Name_Link_HTML + '</strong> <br/> <strong>System: </strong>' + e.features[0].properties.System + '<br/> <strong>Lines: </strong>' + e.features[0].properties.Lines + '<br/> <strong> Services: </strong>' + e.features[0].properties.Service + '<br/> <strong> City: </strong>' + e.features[0].properties.City + '<br/> <strong>Neighborhood: </strong>' + e.features[0].properties.Neighborhood + '<br/> <strong>Status: </strong>' + e.features[0].properties.Status + '<br/> <strong>Year Opened: </strong>' + e.features[0].properties.Year_Opened + '<br/> <strong>Connections: </strong>' + e.features[0].properties.Connections + '<br/> <strong>Accessible: </strong>' + e.features[0].properties.Handicap_Accessible;				 

				// Ensure that if the map is zoomed out such that multiple
				// copies of the feature are visible, the popup appears
				// over the copy being pointed to.
				while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
					coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
				}
				 
				new mapboxgl.Popup()
					.setLngLat(coordinates)
					.setHTML(description)
					.addTo(map);
			});
			 
			// Change the cursor to a pointer when the mouse is over the places layer.
			map.on('mouseenter', Stations_S, function () {
				map.getCanvas().style.cursor = 'pointer';
			});
			 
			// Change it back to a pointer when it leaves.
			map.on('mouseleave', Stations_S, function () {
				map.getCanvas().style.cursor = '';
			});

			map.on('click', Stations_P, function (e) {
				var coordinates = e.features[0].geometry.coordinates.slice();
				var description = '<strong>' + e.features[0].properties.Name_Link_HTML + '</strong> <br/> <strong>System: </strong>' + e.features[0].properties.System + '<br/> <strong>Lines: </strong>' + e.features[0].properties.Lines + '<br/> <strong> Services: </strong>' + e.features[0].properties.Service + '<br/> <strong> City: </strong>' + e.features[0].properties.City + '<br/> <strong>Neighborhood: </strong>' + e.features[0].properties.Neighborhood + '<br/> <strong>Status: </strong>' + e.features[0].properties.Status + '<br/> <strong>Year Opened: </strong>' + e.features[0].properties.Year_Opened + '<br/> <strong>Connections: </strong>' + e.features[0].properties.Connections + '<br/> <strong>Accessible: </strong>' + e.features[0].properties.Handicap_Accessible;				 

				// Ensure that if the map is zoomed out such that multiple
				// copies of the feature are visible, the popup appears
				// over the copy being pointed to.
				while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
					coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
				}
				 
				new mapboxgl.Popup()
					.setLngLat(coordinates)
					.setHTML(description)
					.addTo(map);
			});
			 
			// Change the cursor to a pointer when the mouse is over the places layer.
			map.on('mouseenter', Stations_P, function () {
				map.getCanvas().style.cursor = 'pointer';
			});
			 
			// Change it back to a pointer when it leaves.
			map.on('mouseleave', Stations_P, function () {
				map.getCanvas().style.cursor = '';
			});

		</script>
	</div>
	

	<!-- Footer Menu -->
<!-- 	<div class="ui bottom fixed blue menu">
		<div class="ui container">
			<a class="vertically fitted item">
				Legend
			</a>
		</div>
	</div> -->

	
	<!-- <div class="map-overlay" id="features">
		<h2>U.S. Passenger Rail Map</h2>
		<p>A map showing all the current passenger rail networks in the US (or it will be, when it's finished).</p>
		<h3>What Is This Exactly?</h3>
		<p>Head on over to the <a href="faq.html" target="_blank">FAQ</a> for more information</p>
		<p><strong>This site (and map) is very much under construction.</strong> Things may be broken/wonky/generally unfinished. You can view the map and website's current progress <a href="https://trello.com/b/GinKUKvq" target="_blank">on the Trello Board.</a></p>
		<h3>Got a Suggestion or Comment?</h3>
		<p>Post it <a href="https://trello.com/c/DvDpT6WP" target="_blank">here</a>.</p>
		<br>
		<p><strong>Current Working Map Version:</strong></p>
		<p><em><strong>0.11</strong> // Last Updated April 2019</em></p>
	</div>
	<div class="map-overlay" id="legend"></div> -->


</body>	